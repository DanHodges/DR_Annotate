!function(){"use strict";angular.module("app",["ngRoute"]).config(function(t){t.when("/",{controller:"selectChapterController",controllerAs:"vm",templateUrl:"/views/selectChapterView.html"}),t.when("/edit/:chapter",{controller:"editChapterController",controllerAs:"vm",templateUrl:"/views/editChapterView.html"}),t.otherwise({redirectTo:"/"})})}(),function(){"use strict";function t(t){return{restrict:"A",replace:!0,link:function(n,e,o){n.$watch(o.directive,function(o){e.html(o),t(e.contents())(n)})}}}angular.module("app").directive("directive",t),t.$inject=["$compile"]}(),function(){"use strict";function t(t,n,e,o){var r=this;r.chapter={},r.annotations=[],r.chapterString="",o.domString="",n.get("/api/Chapters/"+t.chapter).then(function(t){r.chapterString+=t.data[0].entireChapterString,r.chapter=t.data[0]},function(t){r.errorMessage="Failed to load data "+t})["finally"](function(){n.get("/api/Annotations").then(function(t){r.annotations=t.data.results,o.domString=r.makeDomString(r.chapterString,r.annotations),console.log("vm.domString :",r.domString)},function(t){r.errorMessage="Failed to load data "+t})}),r.makeDomString=function(t,n){for(var e="",o=n.length,r=0;o>r;r++){var a=r+1,i=n[r].end+1;if(o-1>r)var c=n[a].start-1;e+='<span id="'+n[r].id+'" class="'+n[r].category+'"ng-click="vm.click('+n[r].id+')"> '+n[r].content+"</span>",c>i&&(e+=t.substring(i,c)),r===o-1&&n[r].end<t.length&&(e+=t.substring(i,t.length))}return e},r.click=function(t){console.log("id ===",t)},r.viewjson=function(){console.log("Annotations :",r.annotations)}}angular.module("app").controller("editChapterController",t),t.$inject=["$routeParams","$http","$sce","$scope"]}(),function(){"use strict";function t(t){var n=this;n.chapters=[],t.get("/api/Chapters").then(function(t){angular.copy(t.data,n.chapters),console.log("response :",t.data.results)},function(t){n.errorMessage="Failed to load data "+t})["finally"](function(){n.isBusy=!1})}angular.module("app").controller("selectChapterController",t)}();